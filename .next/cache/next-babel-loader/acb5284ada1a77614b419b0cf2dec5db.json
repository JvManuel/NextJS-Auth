{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/john_vincent/Next/nextjs-auth/pages/profile/index.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Router from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport nextCookie from 'next-cookies';\nimport Layout from \"../../components/layout\";\nimport { withAuthSync } from \"../../utils/auth\";\nimport getHost from \"../../utils/get-host\";\n\nvar Profile =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Profile, _React$Component);\n\n  function Profile() {\n    _classCallCheck(this, Profile);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Profile).apply(this, arguments));\n  }\n\n  _createClass(Profile, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, \"Welcome \", this.props.data.name.firstName, \" \", this.props.data.name.lastName));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(ctx) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(process.env.API_URL + '/a/me', {\n                  method: 'GET',\n                  headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + nextCookie(ctx).token\n                  }\n                }).then(function (response) {\n                  return response.json();\n                });\n\n              case 2:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Profile;\n}(React.Component);\n\nexport default withAuthSync(Profile);","map":{"version":3,"sources":["/home/john_vincent/Next/nextjs-auth/pages/profile/index.js"],"names":["React","Router","fetch","nextCookie","Layout","withAuthSync","getHost","Profile","props","data","name","firstName","lastName","ctx","process","env","API_URL","method","headers","token","then","response","json","Component"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,MAAP;AACA,SAASC,YAAT;AACA,OAAOC,OAAP;;IAEMC,O;;;;;;;;;;;;;6BAcK;AAEP,aAAO,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACW,KAAKC,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqBC,SADhC,OAC4C,KAAKH,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqBE,QADjE,CADK,CAAP;AA8BD;;;;;;gDA7C4BC,G;;;;;;;uBACJX,KAAK,CAACY,OAAO,CAACC,GAAR,CAAYC,OAAZ,GAAsB,OAAvB,EAAgC;AAC1DC,kBAAAA,MAAM,EAAE,KADkD;AAE1DC,kBAAAA,OAAO,EAAE;AACP,oCAAiB,kBADV;AAEP,qCAAiB,YAAYf,UAAU,CAACU,GAAD,CAAV,CAAgBM;AAFtC;AAFiD,iBAAhC,CAAL,CAOtBC,IAPsB,CAOjB,UAAAC,QAAQ;AAAA,yBAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,iBAPS,C;;;AAAjBD,gBAAAA,Q;iDASCA,Q;;;;;;;;;;;;;;;;;;;EAXWrB,KAAK,CAACuB,S;;AAiD5B,eAAelB,YAAY,CAACE,OAAD,CAA3B","sourcesContent":["import React from 'react'\nimport Router from 'next/router'\nimport fetch from 'isomorphic-unfetch'\nimport nextCookie from 'next-cookies'\nimport Layout from 'components/layout'\nimport { withAuthSync } from 'utils/auth'\nimport getHost from 'utils/get-host'\n\nclass Profile extends React.Component {\n  static async getInitialProps(ctx) {\n    const response = await fetch(process.env.API_URL + '/a/me', {\n      method: 'GET',\n      headers: {\n        'Content-Type' : 'application/json',\n        'Authorization': 'Bearer ' + nextCookie(ctx).token\n      },\n    })\n    .then(response => response.json())\n\n    return response\n  }\n  \n  render() {\n\n    return <Layout>\n      <div>\n        Welcome {this.props.data.name.firstName} {this.props.data.name.lastName}\n      </div>\n      {/* <style jsx>{`\n        body{\n          background-color: red;\n        }\n        img {\n          max-width: 200px;\n          border-radius: 0.5rem;\n        }\n\n        h1 {\n          margin-bottom: 0;\n        }\n\n        .lead {\n          margin-top: 0;\n          font-size: 1.5rem;\n          font-weight: 300;\n          color: #666;\n        }\n\n        p {\n          color: #6a737d;\n        }\n      `}</style>  */}\n    </Layout>\n    \n  }\n}\n\nexport default withAuthSync(Profile)\n"]},"metadata":{},"sourceType":"module"}