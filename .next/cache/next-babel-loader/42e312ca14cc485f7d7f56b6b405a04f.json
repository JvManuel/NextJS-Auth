{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/john_vincent/Next/nextjs-auth/pages/login/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Layout from \"../../components/layout\";\nimport { authenticate } from \"../../utils/auth\";\n\nfunction Login() {\n  var _useState = useState({\n    email: '',\n    password: '',\n    error: ''\n  }),\n      userData = _useState[0],\n      setUserData = _useState[1];\n\n  function submit(_x) {\n    return _submit.apply(this, arguments);\n  }\n\n  function _submit() {\n    _submit = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var email, password, url, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              setUserData(_Object$assign({}, userData, {\n                error: ''\n              }));\n              email = userData.email;\n              password = userData.password;\n              url = process.env.API_URL + '/a/auth/login';\n              _context.prev = 5;\n              _context.next = 8;\n              return fetch(url, {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: _JSON$stringify({\n                  email: email,\n                  password: password\n                })\n              }).then(function (response) {\n                return response.json();\n              });\n\n            case 8:\n              response = _context.sent;\n              _context.next = 11;\n              return authenticate(response.data.token);\n\n            case 11:\n              _context.next = 15;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](5);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 13]]);\n    }));\n    return _submit.apply(this, arguments);\n  }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-1828860322\" + \" \" + 'login',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, __jsx(\"form\", {\n    onSubmit: submit,\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, __jsx(\"center\", {\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Login\")), __jsx(\"input\", {\n    type: \"text\",\n    id: \"email\",\n    name: \"email\",\n    placeholder: \"Email\",\n    value: userData.email,\n    onChange: function onChange(event) {\n      return setUserData(_Object$assign({}, userData, {\n        email: event.target.value\n      }));\n    },\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    placeholder: \"Password\",\n    value: userData.password,\n    onChange: function onChange(event) {\n      return setUserData(_Object$assign({}, userData, {\n        password: event.target.value\n      }));\n    },\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Login\"), userData.error && __jsx(\"p\", {\n    className: \"jsx-1828860322\" + \" \" + 'error',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"Error: \", userData.error))), __jsx(_JSXStyle, {\n    id: \"1828860322\",\n    __self: this\n  }, \".login.jsx-1828860322{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-1828860322{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-1828860322{font-weight:600;}input.jsx-1828860322{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-1828860322{margin:0.5rem 0 0;color:brown;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2pvaG5fdmluY2VudC9OZXh0L25leHRqcy1hdXRoL3BhZ2VzL2xvZ2luL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRFa0IsQUFHMkIsQUFPSCxBQUlHLEFBR0osQUFNTSxZQUxHLElBZFAsQUFXaEIsRUFTYyxZQW5CQyxBQW9CZixHQU53QixVQWJBLFlBY0osVUFiQSxRQWNwQixDQVZtQixTQUhuQixzREFJQSIsImZpbGUiOiIvaG9tZS9qb2huX3ZpbmNlbnQvTmV4dC9uZXh0anMtYXV0aC9wYWdlcy9sb2dpbi9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IGZldGNoIGZyb20gJ2lzb21vcnBoaWMtdW5mZXRjaCdcbmltcG9ydCBMYXlvdXQgZnJvbSAnY29tcG9uZW50cy9sYXlvdXQnXG5pbXBvcnQgeyBhdXRoZW50aWNhdGUgfSBmcm9tICd1dGlscy9hdXRoJ1xuXG5mdW5jdGlvbiBMb2dpbiAoKSB7XG4gIGNvbnN0IFt1c2VyRGF0YSwgc2V0VXNlckRhdGFdID0gdXNlU3RhdGUoeyBcbiAgICBlbWFpbDogJycsXG4gICAgcGFzc3dvcmQ6ICcnLFxuICAgIGVycm9yOiAnJ1xuICB9KVxuXG4gIGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc2V0VXNlckRhdGEoT2JqZWN0LmFzc2lnbih7fSwgdXNlckRhdGEsIHsgZXJyb3I6ICcnIH0pKVxuXG4gICAgY29uc3QgZW1haWwgPSB1c2VyRGF0YS5lbWFpbFxuICAgIGNvbnN0IHBhc3N3b3JkID0gdXNlckRhdGEucGFzc3dvcmRcblxuICAgIGNvbnN0IHVybCA9IHByb2Nlc3MuZW52LkFQSV9VUkwgKyAnL2EvYXV0aC9sb2dpbicgXG4gICAgXG4gICAgdHJ5e1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgcGFzc3dvcmRcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICBhd2FpdCBhdXRoZW50aWNhdGUocmVzcG9uc2UuZGF0YS50b2tlbilcbiAgICB9IGNhdGNoIChlcnJvcil7XG5cbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbG9naW4nPlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17c3VibWl0fT5cbiAgICAgICAgICA8Y2VudGVyPlxuICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9J2VtYWlsJz5Mb2dpbjwvbGFiZWw+XG4gICAgICAgICAgPC9jZW50ZXI+XG5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICBpZD0nZW1haWwnXG4gICAgICAgICAgICBuYW1lPSdlbWFpbCdcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdFbWFpbCdcbiAgICAgICAgICAgIHZhbHVlPXt1c2VyRGF0YS5lbWFpbH1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldmVudCA9PlxuICAgICAgICAgICAgICBzZXRVc2VyRGF0YShcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB1c2VyRGF0YSwgeyBlbWFpbDogZXZlbnQudGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcbiAgICAgICAgICAgIGlkPSdwYXNzd29yZCdcbiAgICAgICAgICAgIG5hbWU9J3Bhc3N3b3JkJ1xuICAgICAgICAgICAgcGxhY2Vob2xkZXI9J1Bhc3N3b3JkJ1xuICAgICAgICAgICAgdmFsdWU9e3VzZXJEYXRhLnBhc3N3b3JkfVxuICAgICAgICAgICAgb25DaGFuZ2U9e2V2ZW50ID0+XG4gICAgICAgICAgICAgIHNldFVzZXJEYXRhKFxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHVzZXJEYXRhLCB7IHBhc3N3b3JkOiBldmVudC50YXJnZXQudmFsdWUgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9J3N1Ym1pdCc+TG9naW48L2J1dHRvbj5cblxuICAgICAgICAgIHt1c2VyRGF0YS5lcnJvciAmJiA8cCBjbGFzc05hbWU9J2Vycm9yJz5FcnJvcjoge3VzZXJEYXRhLmVycm9yfTwvcD59XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAubG9naW4ge1xuICAgICAgICAgIG1heC13aWR0aDogMzQwcHg7XG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgfVxuICAgICAgICBmb3JtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICB9XG4gICAgICAgIGxhYmVsIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0IHtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgbWFyZ2luOiAwLjNyZW0gMCAxcmVtO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICB9XG4gICAgICAgIC5lcnJvciB7XG4gICAgICAgICAgbWFyZ2luOiAwLjVyZW0gMCAwO1xuICAgICAgICAgIGNvbG9yOiBicm93bjtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IExvZ2luIl19 */\\n/*@ sourceURL=/home/john_vincent/Next/nextjs-auth/pages/login/index.js */\"));\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/john_vincent/Next/nextjs-auth/pages/login/index.js"],"names":["React","useState","fetch","Layout","authenticate","Login","email","password","error","userData","setUserData","submit","event","preventDefault","url","process","env","API_URL","method","headers","body","then","response","json","data","token","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport fetch from 'isomorphic-unfetch'\nimport Layout from 'components/layout'\nimport { authenticate } from 'utils/auth'\n\nfunction Login () {\n  const [userData, setUserData] = useState({ \n    email: '',\n    password: '',\n    error: ''\n  })\n\n  async function submit (event) {\n    event.preventDefault()\n    setUserData(Object.assign({}, userData, { error: '' }))\n\n    const email = userData.email\n    const password = userData.password\n\n    const url = process.env.API_URL + '/a/auth/login' \n    \n    try{\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      })\n      .then(response => response.json())\n      await authenticate(response.data.token)\n    } catch (error){\n\n    }\n  }\n\n  return (\n    <Layout>\n      <div className='login'>\n        <form onSubmit={submit}>\n          <center>\n            <label htmlFor='email'>Login</label>\n          </center>\n\n          <input\n            type='text'\n            id='email'\n            name='email'\n            placeholder='Email'\n            value={userData.email}\n            onChange={event =>\n              setUserData(\n                Object.assign({}, userData, { email: event.target.value })\n              )\n            }\n          />\n\n          <input\n            type='password'\n            id='password'\n            name='password'\n            placeholder='Password'\n            value={userData.password}\n            onChange={event =>\n              setUserData(\n                Object.assign({}, userData, { password: event.target.value })\n              )\n            }\n          />\n\n          <button type='submit'>Login</button>\n\n          {userData.error && <p className='error'>Error: {userData.error}</p>}\n        </form>\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          color: brown;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}