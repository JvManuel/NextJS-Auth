{"version":3,"file":"static/webpack/static/development/pages/login.js.b8bb2be81c3ef56b9a82.hot-update.js","sources":["webpack:///./pages/login/index.js"],"sourcesContent":["import React, { useState } from 'react'\nimport fetch from 'isomorphic-unfetch'\nimport Layout from 'components/layout'\nimport { authenticate } from 'utils/auth'\n\nfunction Login () {\n  const [userData, setUserData] = useState({ \n    email: '',\n    password: '',\n    error: ''\n  })\n\n  async function submit (event) {\n    event.preventDefault()\n    setUserData(Object.assign({}, userData, { error: '' }))\n\n    const email = userData.email\n    const password = userData.password\n\n    const url = process.env.API_URL + '/a/auth/login' \n    \n    try{\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      })\n      .then(response => response.json())\n      await authenticate(response.data.token)\n    } catch (error){\n\n    }\n  }\n\n  return (\n    <Layout>\n      <div className='login'>\n        <form onSubmit={submit}>\n          <center>\n            <label htmlFor='email'>Login</label>\n          </center>\n\n          <input\n            type='text'\n            id='email'\n            name='email'\n            placeholder='Email'\n            value={userData.email}\n            onChange={event =>\n              setUserData(\n                Object.assign({}, userData, { email: event.target.value })\n              )\n            }\n          />\n\n          <input\n            type='password'\n            id='password'\n            name='password'\n            placeholder='Password'\n            value={userData.password}\n            onChange={event =>\n              setUserData(\n                Object.assign({}, userData, { password: event.target.value })\n              )\n            }\n          />\n\n          <button type='submit'>Login</button>\n\n          {userData.error && <p className='error'>Error: {userData.error}</p>}\n        </form>\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          color: brown;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nexport default Login"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAEA;AAPA;AAAA;AAAA;AAWA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAHA;AAQA;AAAA;AACA;AAnBA;AAUA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;AACA;AA+BA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAFA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAFA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAnCA;AAAA;AAAA;AAkEA;AACA;AACA;;;;A","sourceRoot":""}